/**
 * smart - A light javascript library.
 * @version v0.0.2
 * @author hankewins
 * @link https://github.com/hankewins/smartjs#readme
 * @license MIT
 */
(function(e){function t(){}function n(e,t){var n=Object.prototype.toString;if("[object Array]"===n.call(e))for(var r=0,o=e.length;o>r;r++)t.call(e,r,e[r]);if("[object Object]"===n.call(e))for(var i in e)t.call(e,i,e[i])}function r(t,n,o){for(var i in n)o&&(s.isObject(n[i])||s.isArray(n[i]))?(s.isObject(n[i])&&!s.isObject(t[i])&&(t[i]={}),s.isArray(n[i])&&!s.isArray(t[i])&&(t[i]=[]),r(t[i],n[i],o)):n[i]!==e&&(t[i]=n[i])}var o=window,i=document,a=Array.prototype.slice,c=["Object","Array","Function","String","Number","Null","Undefined"],s=o.smart||{};s.$=o.jQuery||o.Zepto||o.ender||o.$,s={version:"0.0.1",each:n,forEach:n,isEmptyObject:function(e){for(var t in e)return!1;return!0},namespace:function(e){var t,n=o;if("string"==typeof e)for(var r=0,i=e.split(".");r<i.length;r++)t=i[r],n[t]=n[t]||{},n=n[t];return n},extend:function(e){var t,o=a.call(arguments,1);"boolean"==typeof e&&(t=e,e=o.shift()),n(o,function(n,o){r(e,o,t)})},"package":function(e,t){var n;"function"==typeof e?(t=e,n=window):"string"==typeof e?n=this.namespace(e):"object"==typeof e&&(n=e),t.call(n,this)},util:function(e,n){var n=s.isFunction(n)?n:t;s.isString(e)?s.util[e]=n:s.isFunction(e)?s.extend(s.util,e()):s.isObject(e)&&s.extend(s.util,e)}},n(c,function(e,t){s["is"+t]=function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"?!0:!1}}),s.util("currentScript",function(){var e,t=i.getElementsByTagName("script"),n=t.length;if(i.currentScript)return i.currentScript;if(0!==n){if(1===t)return t[0];if("readyState"in t[0])for(var r=t.length;r--;)if("interactive"===t[r].readyState)return t[r];if("loading"===i.readyState)return t[len-1];try{throw Error("get currentJS")}catch(o){o.fileName?e=o.fileName:o.stack?e=o.stack.match(/\([^\)]+\:\d+\)/)[0].replace(/^\(|(\:\d+)+\)$/g,""):o.sourceURL&&(e=o.sourceURL)}if(e)for(var a=0;a<len;a++)if(t[a].src===e)return t[a];return e||t[len-1]}}),s.util("application",function(e){var t,n,r,o,i=s.util.currentScript(),a="",e=e||"";if(o=e?new RegExp(e+"\\S+","ig"):new RegExp(e+"/[^/]+$","ig"),r=i.src.replace(o,e),a=r,i.src.indexOf(location.host)>-1)n=location.protocol+"//"+location.host,t=n;else if(n=location.protocol+"//"+location.host,i.src.indexOf("localhost")>-1)t="http://localhost";else if(i.src.indexOf("//")>-1){var c=i.src.substring(0,i.src.indexOf("//")+2),u=i.src.replace(c,"");u=u.substring(0,u.indexOf("/")),t=c+u}return{staticPath:a,assetsRoot:t,webRoot:n}}),o.smart=s}).call(this),smart["package"](function(e){var t=window,n=document,e=t.smart||(t.smart={}),r=1;e.cache||(e.cache={});var o=e.cache.__event_cache={},i=function(e){return e._guid||(e._guid=r++)},a=function(){return!0},c=function(){return!1},s="onfocusin"in window,u={};e.forEach(["click","mouseup","mousemove","mousedown"],function(e){u[e]="MouseEvents"});var l={focus:{focus:"focusin",blur:"focusout"},hover:{mouseenter:"mouseover",mouseleave:"mouseout"}},f=function(e){return l.hover[e]||s&&l.focus[e]||e},p=function(t){if("isDefaultPrevented"in t)return t;var n,r;return n=t,r={preventDefault:"isDefaultPrevented",stopPropagation:"isPropagationStopped",stopImmediatePropagation:"isImmediatePropagationStopped"},e.forEach(r,function(e,r){var o=n[r];t[r]=function(){return this[e]=a,o&&o.apply(n,arguments)},t[e]=c}),(void 0!==n.defaultPrevented?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=a),t},d=function(e){var t,n;t={originalEvent:e};for(n in e)void 0!==e[n]&&(t[n]=e[n]);return t},m=n.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},v=function(e,t,n,r){var a,c,s,u=[];if(c=o[i(t)],!c)return u;for(a=c.length;a--;)s=c[a],e&&e!=s.type||t&&t!=s.elem||n&&i(n)!==i(s.callback)||r&&r!=s.selector||u.push(s);return u},h={add:function(t,n,r,a){var c,s,u,v,h,g,y={};e.forEach(n.split(/\s/),function(n){c=i(t),s=o[c]||(o[c]=[]),a&&(u=function(n){var o;for(g=n.target;g!=t;){if(e.util.matchesSelector(g,a))return o=d(n),o.currentTarget=g,r.apply(g,[o]);g.parentNode&&(g=g.parentNode)}}),y={type:n,elem:t,selector:a,callback:r,delegator:u,index:s.length},n in l.hover&&(r=function(e){var n=e.relatedTarget;return!n||n!==t&&!m(t,n)?y.callback.apply(t,arguments):void 0}),v=u||r,y.proxy=function(e){return e=p(e),e.isImmediatePropagationStopped()?void 0:(h=v.apply(t,[e]),h===!1&&(e.stopPropagation(),e.preventDefault()),h)},s.push(y),"addEventListener"in t&&t.addEventListener(f(n),y.proxy,!1)})},remove:function(t,n,r,a){var c=i(t);e.forEach(n.split(/\s/),function(e){var n,i;for(i=v(e,t,r,a),n=i.length;n--;)delete o[c][i[n].index],"removeEventListener"in t&&t.removeEventListener(e,i[n].proxy,!1)})},bind:function(e,t,n){h.on(e,t,n)},unbind:function(e,t,n){h.off(e,t,n)},on:function(t,r,o,a){return t&&!e.isString(t)?void e.forEach(t,function(e,t){h.on(t,r,o,a)}):(e.isFunction(o)&&(a=o,o=void 0),(n||r instanceof HTMLElement)&&(r=[r]),i(a),void e.forEach(r,function(e){h.add(e,t,a,o)}))},off:function(t,r,o,i){return t&&!e.isString(t)?void e.forEach(t,function(e,t){h.on(t,r,o,i)}):(e.isFunction(o)&&(i=o,o=void 0),(n||r instanceof HTMLElement)&&(r=[r]),void e.forEach(r,function(e){h.remove(e,t,i,o)}))},trigger:function(t,r,o){(n||r instanceof HTMLElement)&&(r=[r]),e.isString(t)&&e.forEach(r,function(r){e.forEach(t.split(/\s/),function(t){var i,a,c;if(/^(focus|blur)$/.test(t))try{r[t]()}catch(s){}else{if(i=n.createEvent(u[t]||"Events"),i.initEvent(t,!0,!0),i=p(i),i=d(i),i.target=r,o&&e.isObject(o))for(var l in o)i[l]=o[l];for(a=v(t,r),c=a.length;c--;)if(a[c].proxy(i),i.isImmediatePropagationStopped())return!1}})})}};e.forEach(["focusin","focusout","focus","blur","load","resize","scroll","unload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","keydown","keypress","keyup","error"],function(e){h[e]=function(t,n){return n?h.bind(e,t,n):h.trigger(e,t)}}),e.event=h}),smart["package"](function(e){var t={serializeParam:function(e){if(!e)return"";var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},getUrlParam:function(e,t,n){var r=new RegExp("(?:\\?|&|#)"+e+"(=[^&]*)(?:$|#|&)","i"),o=r.exec(t),i=o?o[1]:"";return n?encodeURIComponent(i):i},ajax:function(e){var n=e,r=n.method.toLocaleUpperCase(),o="POST"==r,i=n.timeout,a=!1,c="async"in n?e.async:!0,s=window.XMLHttpRequest?new XMLHttpRequest:!1;if(!s)return n.error&&n.error.call(null,{ret:999,msg:"Create XHR Error!"}),!1;var u=t.serializeParam(n.data);return!o&&(n.url=(e.url.indexOf("?")>-1?"?":"&")+u),s.open(r,n.url,c),o&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4==s.readyState){var e=s.status;if(200==e&&300>e||304==e||0==e){var t=s.responseText.replace(/\r|\n|\t/gi,""),r=null;try{r=JSON.parse(t)}catch(o){console.log("response is not JSON.")}n.success&&n.success(r,s)}else n.error&&n.error(s);a=!0,timer&&clearTimeout(timer)}},s.send(o?u:void 0),i&&(timer=setTimeout(function(){a||(s.abort(),n.timeout&&n.timeout(s))},i)),s}};e.http=t}),smart["package"](function(e){var t=document,n=(t.createElement("div"),"classList"in document.documentElement),r={one:function(e,n){if(e){var r=n||t;return r.querySelector(e)}},all:function(e,n){if(e){var r=n||t;return r.querySelectorAll(e)}},id:function(e){return t.getElementById(e)},tagName:function(e,n){var r=n||t;return r.getElementByTagName(e)},matchesSelector:function(e,t){if(e&&t){var n=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector;return n?n.call(e,t):void 0}},addClass:function(e,t){if(n){if(!e||!t||!r.hasClass(e,t))return;e.classList.add(t)}else{if(!e||!t||!r.hasClass(e,t))return;e.className+=" "+t}},hasClass:function(e,t){return n?e&&t?void e.classList.contains(t):!1:e&&t?-1<" "+e.className+" ".indexOf(" "+t+" "):!1},removeClass:function(e,t){if(n){if(!e||!t||!r.hasClass(e,t))return;e.classList.remove(t)}else{if(!e||!t||!r.hasClass(e,t))return;e.className=e.className.replace(new RegExp("(?:^|\\s+)"+t+"(?:$|\\s+)")," ")}},toggleClass:function(e,t){r.hasClass(e,t)?r.removeClass(e,t):r.addClass(e,t)},replaceClass:function(e,t,n){r.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(?:^|\\s+)"+t+"(?:$|\\s+)")," "+n+" "))},children:function(e){if(e.childElementCount)return[].slice.call(el.children);for(var t=[],n=e.firstChild;n;n=n.nextSlibling)1==n.nodeType&&t.push(n);return t},next:function(e){if("nextElementSibling"in e)return e.nextElementSibling;for(;e=e.nextSlibling;)if(1===e.nodeType)return e},prev:function(e){if("previousElementSibling"in e)return e.previousElementSibling;for(;e=e.previousSibling;)if(1===e.nodeType)return e},first:function(e){if("firstElementChild"in e)return e.firstElementChild;for(;e=e.firstChild;)if(1===e.nodeType)return e},last:function(e){if("lastElementChild"in e)return e.firstElementChild;for(;e=e.lastChild;)if(1===e.nodeType)return e},parent:function(e){if("parentElement"in e)return e.parentElement;for(;e=e.parentNode;)if(1===e.nodeType)return e},filter:function(t,n){return e.filter(t,function(e){return r.matchesSelector(t,n)})},insertAfter:function(e,t,n){var r=n.nextSibling;return r?e.insertBefore(t,r):e.appendChild(t),t}};e.$=e.dom=r}),smart["package"](function(){var e={options:{path:"/",secure:!1,domain:!1,expires:!1},_setOptions:function(e){return void 0==e?this.options:smart.extend(e,this.options)},setItem:function(e,t){var n=this._setOptions(arguments[2]);if(t=encodeURIComponent(t),n.path&&(t+="; path="+n.path),n.domain&&(t+="; domain="+n.domain),n.expires){var r=new Date;r.setTime(r.getTime()+24*n.expires*60*60*1e3),t+="; expires="+r.toGMTString()}n.secure&&(t+="; secure"),document.cookie=e+"="+t},getItem:function(e){var t=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(skey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return t?decodeURIComponent(t):null},removeItem:function(e){if(!e||!this.hasItem(e))return!1;var t=this._setOptions(arguments[1]),n="";return n="; expires=Thu, 01 Jan 1970 00:00:00 GMT",t.domain&&(n+="; domain="+t.domain),t.path&&(n+="; path="+t.path),document.cookie=encodeURIComponent(e)+"="+n,!0},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\+").test(document.cookie)}};smart.cookie=e});